{"ast":null,"code":"var _jsxFileName = \"G:\\\\react projects\\\\splitback2\\\\frontend\\\\src\\\\Components\\\\Group\\\\OwesBox\\\\OwesBox.jsx\";\nimport React from \"react\";\nimport \"../../../sass/styles.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass OwesBox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updatingBalanceDebts = () => {\n      let bills = this.props.clickedGroup.bills;\n      let tempObject = {};\n      bills.forEach(elem => {\n        elem.debts.forEach(el => {\n          let nameKey = el.name.replace(\" \", \"\");\n\n          if (!tempObject.hasOwnProperty(el.name)) {\n            tempObject[nameKey] = {};\n            tempObject[nameKey].name = el.name;\n            tempObject[nameKey].debt = el.debt;\n          } else {\n            tempObject[nameKey].debt += el.debt;\n          }\n        });\n      });\n      console.log(tempObject);\n      let owners = [];\n      let lenders = [];\n\n      for (let elem in tempObject) {\n        console.log(elem);\n        console.log(tempObject[elem]);\n        console.log(this.state.average);\n        let newDebt = tempObject[elem].debt - this.state.average;\n        tempObject[elem].debt = newDebt;\n        tempObject[elem].debt < 0 && owners.push({\n          name: tempObject[elem].name,\n          debt: Math.round(tempObject[elem].debt * 100) / 100\n        });\n        tempObject[elem].debt > 0 && lenders.push({\n          name: tempObject[elem].name,\n          debt: Math.round(tempObject[elem].debt * 100) / 100\n        });\n      }\n\n      this.setState({\n        owners: owners,\n        lenders: lenders\n      });\n      console.log(owners, lenders);\n    };\n\n    this.summaryOfBills = () => {\n      console.log(this.props.clickedGroup.bills);\n\n      if (this.props.clickedGroup.bills.length !== 0) {\n        let bills = this.props.clickedGroup.bills;\n        let totalAmount;\n\n        if (bills.length === 1) {\n          totalAmount = bills[0].total;\n        } else {\n          totalAmount = bills.reduce((a, b) => {\n            return a + b.total;\n          }, 0);\n        }\n\n        let average = totalAmount / parseFloat(this.props.clickedGroup.people.length);\n        this.setState({\n          average: parseFloat(average),\n          totalAmount: parseFloat(totalAmount)\n        }, () => {\n          this.updatingBalanceDebts();\n        });\n        console.log(average, totalAmount);\n      }\n    };\n\n    this.state = {\n      lenders: [],\n      owners: [],\n      totalAmount: 0,\n      average: 0\n    };\n  }\n\n  componentDidMount() {\n    this.props.clickedGroup.bills.length > 0 && this.summaryOfBills();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"owesBox\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"who owes who\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.owners.map((elem, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary m-1\",\n            children: [elem.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge badge-secondary\",\n              style: {\n                backgroundColor: \"grey\"\n              },\n              children: [elem.debt, \"\\u20B9\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.lenders.map((elem, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary m-1\",\n            children: [elem.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge badge-secondary\",\n              style: {\n                backgroundColor: \"grey\"\n              },\n              children: [elem.debt, \"\\u20B9\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default OwesBox;","map":{"version":3,"sources":["G:/react projects/splitback2/frontend/src/Components/Group/OwesBox/OwesBox.jsx"],"names":["React","OwesBox","Component","constructor","props","updatingBalanceDebts","bills","clickedGroup","tempObject","forEach","elem","debts","el","nameKey","name","replace","hasOwnProperty","debt","console","log","owners","lenders","state","average","newDebt","push","Math","round","setState","summaryOfBills","length","totalAmount","total","reduce","a","b","parseFloat","people","componentDidMount","render","map","index","backgroundColor"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../../../sass/styles.scss\";\n\nclass OwesBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lenders: [],\n      owners: [],\n      totalAmount: 0,\n      average: 0,\n    };\n  }\n\n  updatingBalanceDebts = () => {\n    let bills = this.props.clickedGroup.bills;\n    let tempObject = {};\n    bills.forEach((elem) => {\n      elem.debts.forEach((el) => {\n        let nameKey = el.name.replace(\" \", \"\");\n        if (!tempObject.hasOwnProperty(el.name)) {\n          tempObject[nameKey] = {};\n          tempObject[nameKey].name = el.name;\n          tempObject[nameKey].debt = el.debt;\n        } else {\n          tempObject[nameKey].debt += el.debt;\n        }\n      });\n    });\n    console.log(tempObject);\n    let owners = [];\n    let lenders = [];\n\n    for (let elem in tempObject) {\n      console.log(elem);\n      console.log(tempObject[elem]);\n      console.log(this.state.average);\n      let newDebt = tempObject[elem].debt - this.state.average;\n      tempObject[elem].debt = newDebt;\n      tempObject[elem].debt < 0 &&\n        owners.push({\n          name: tempObject[elem].name,\n          debt: Math.round(tempObject[elem].debt * 100) / 100,\n        });\n      tempObject[elem].debt > 0 &&\n        lenders.push({\n          name: tempObject[elem].name,\n          debt: Math.round(tempObject[elem].debt * 100) / 100,\n        });\n    }\n\n    this.setState({\n      owners: owners,\n      lenders: lenders,\n    });\n\n    console.log(owners, lenders);\n  };\n  summaryOfBills = () => {\n    console.log(this.props.clickedGroup.bills);\n    if (this.props.clickedGroup.bills.length !== 0) {\n      let bills = this.props.clickedGroup.bills;\n\n      let totalAmount;\n      if (bills.length === 1) {\n        totalAmount = bills[0].total;\n      } else {\n        totalAmount = bills.reduce((a, b) => {\n          return a + b.total;\n        }, 0);\n      }\n      let average =\n        totalAmount / parseFloat(this.props.clickedGroup.people.length);\n\n      this.setState(\n        {\n          average: parseFloat(average),\n          totalAmount: parseFloat(totalAmount),\n        },\n        () => {\n          this.updatingBalanceDebts();\n        }\n      );\n      console.log(average, totalAmount);\n    }\n  };\n  componentDidMount() {\n    this.props.clickedGroup.bills.length > 0 && this.summaryOfBills();\n  }\n\n  render() {\n    return (\n      <div className=\"owesBox\">\n        <h1>who owes who</h1>\n        <div className=\"d-flex justify-content-between\">\n          <div>\n            {this.state.owners.map((elem, index) => (\n              <button type=\"button\" className=\"btn btn-primary m-1\" key={index}>\n                {elem.name}{\" \"}\n                <span\n                  className=\"badge badge-secondary\"\n                  style={{ backgroundColor: \"grey\" }}\n                >\n                  {elem.debt}&#8377;\n                </span>\n              </button>\n            ))}\n          </div>\n\n          <div>\n            {this.state.lenders.map((elem, index) => (\n              <button type=\"button\" className=\"btn btn-primary m-1\" key={index}>\n                {elem.name}{\" \"}\n                <span\n                  className=\"badge badge-secondary\"\n                  style={{ backgroundColor: \"grey\" }}\n                >\n                  {elem.debt}&#8377;\n                </span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default OwesBox;\n"]},"metadata":{},"sourceType":"module"}